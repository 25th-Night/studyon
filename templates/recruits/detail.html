{% extends "base.html" %}
{% load static %}
{% block style %}
    <link href="{% static 'fontawesomefree/css/fontawesome.css' %}"
          rel="stylesheet"
          type="text/css">
    <link href="{% static 'fontawesomefree/css/brands.css' %}"
          rel="stylesheet"
          type="text/css">
    <link href="{% static 'fontawesomefree/css/solid.css' %}"
          rel="stylesheet"
          type="text/css">
{% endblock style %}
{% block content %}
    <div class="container mx-auto max-w-3xl pt-6">
        <div class="flex justify-between">
            <div>
                <h1 class="text-3xl font-bold">{{ recruit.title }}</h1>
                <p class="text-xl">{{ recruit.creator }}</p>
            </div>
            <div>
                <p class="text-2xl text-right">
                    {{ recruit.like_users.count }} <i class="fa-solid fa-heart text-red-500"></i>
                </p>
                <p class="text-xl text-right">모집 인원: {{ recruit.members.count }}/{{ recruit.total_seats }}</p>
            </div>
        </div>
        <ul class="bg-slate-100 rounded-lg p-4 mt-8">
            <li class="pt-4 first:pt-0">
                <h3 class="text-2xl text-cyan-600 font-bold">마감 기한</h3>
                <p>{{ recruit.deadline|date:'Y년 m월 d일' }} 까지</p>
            </li>
            <li class="pt-4 first:pt-0">
                <h3 class="text-2xl text-cyan-600 font-bold">스터디 기간</h3>
                <p>{{ recruit.start|date:'Y년 m월 d일' }} 부터 {{ recruit.end|date:'Y년 m월 d일' }} 까지</p>
            </li>
            <li class="pt-4 first:pt-0">
                <h3 class="text-2xl text-cyan-600 font-bold">모집 대상</h3>
                <p>{{ recruit.target }}</p>
            </li>
            <li class="pt-4 first:pt-0">
                <h3 class="text-2xl text-cyan-600 font-bold">진행 과정</h3>
                <p>{{ recruit.process }}</p>
            </li>
            <li class="pt-4 first:pt-0">
                <h3 class="text-2xl text-cyan-600 font-bold">추가 정보</h3>
                <p>{{ recruit.info }}</p>
            </li>
        </ul>
        {% if user.is_authenticated %}
            <div class="pt-10">
                {% if request.user == recruit.creator %}
                    <a href="{% url 'recruits:recruit_request' recruit.id %}"
                       class="bg-cyan-500 hover:bg-cyan-600 text-white p-1 rounded-md mt-4">참가 신청 확인</a>
                {% else %}
                    {% if recruit.total_seats > recruit.members.count %}
                        <h2 class="text-2xl font-bold">참가 신청하기</h2>
                        {% for message in messages %}
                            <div class="bg-red-200 p-2 rounded-lg mt-2 before:content-['•'] before:pr-2">{{ message }}</div>
                        {% endfor %}
                        <form action="" method="post">
                            {% csrf_token %}
                            <div class="mt-5 p-3 border-2 border-cyan-500 rounded-2xl">
                                <label for="id_content">
                                    <textarea name="content"
                                              rows="5"
                                              required
                                              id="id_content"
                                              class="resize-none w-full outline-none text-sm"></textarea>
                                </label>
                            </div>
                            <input class="cursor-pointer bg-cyan-500 hover:bg-cyan-600 text-white p-1 rounded-md mt-4"
                                   type="submit"
                                   value="신청하기">
                        </form>
                    {% endif %}
                {% endif %}
            </div>
        {% endif %}
    </div>
{% endblock content %}
